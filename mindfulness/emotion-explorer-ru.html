<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ò—Å—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å –≠–º–æ—Ü–∏–π - –¢–µ—Ä–∞–ø–∏—è –û—Å–æ–∑–Ω–∞–Ω–Ω–æ—Å—Ç–∏</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --power-color: #FF0000;
            --empathy-color: #00FFFF;
            --possession-color: #00FF00;
            --loss-color: #FF00FF;
            --crave-color: #0000FF;
            --emptiness-color: #FFFF00;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(135deg, #fafaf9 0%, #f5f2ed 100%);
            min-height: 100vh;
            color: #1e293b;
        }

        .nav-bar {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-bottom: 1px solid #e2e8f0;
            padding: 0.75rem 1.5rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            z-index: 1000;
        }

        .nav-brand {
            font-size: 1.25rem;
            font-weight: 700;
            color: #14b8a6;
            cursor: pointer;
        }

        .nav-links {
            display: flex;
            gap: 0.5rem;
            align-items: center;
        }

        .nav-btn {
            padding: 0.5rem 1rem;
            border: none;
            background: transparent;
            color: #64748b;
            font-size: 0.875rem;
            font-weight: 500;
            cursor: pointer;
            border-radius: 9999px;
            transition: all 0.2s;
        }

        .nav-btn:hover {
            background: rgba(20, 184, 166, 0.1);
            color: #14b8a6;
        }

        .mobile-menu-btn {
            display: none;
            background: none;
            border: none;
            font-size: 1.25rem;
            color: #64748b;
            cursor: pointer;
        }

        .explorer-container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 5rem 1rem 2rem;
        }

        .explorer-header {
            text-align: center;
            margin-bottom: 0.75rem;
        }

        .explorer-header h1 {
            font-size: 1.25rem;
            margin-bottom: 0.15rem;
            background: linear-gradient(135deg, #8B0000, #FF6B35, #191970, #2E8B57);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .explorer-header p {
            color: #64748b;
            font-size: 0.8rem;
        }

        .ribbon-display-section {
            background: white;
            border-radius: 1rem;
            padding: 1rem;
            margin-bottom: 1rem;
            box-shadow: 0 4px 20px rgba(0,0,0,0.08);
            border: 1px solid #e2e8f0;
        }

        #emotionRibbonDisplay {
            width: 100%;
            height: 100px;
            background-color: #f0f0f0;
            position: relative;
            overflow: hidden;
            border-radius: 0.5rem;
        }

        .categories-tabs-section {
            max-width: 1200px;
            margin: 0 auto;
            padding: 1rem;
        }

        .tabs-container {
            display: flex;
            gap: 0.4rem;
            margin-bottom: 1rem;
            flex-wrap: wrap;
            justify-content: center;
        }

        .category-tab {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 0.3rem;
            padding: 0.6rem 1rem;
            border: 2px solid transparent;
            border-radius: 0.75rem;
            background: white;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
            min-width: 70px;
        }

        .category-tab:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0,0,0,0.12);
        }

        .category-tab.active {
            border-color: #1e293b;
            background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%);
            box-shadow: 0 4px 15px rgba(0,0,0,0.15);
        }

        .tab-emoji {
            font-size: 1.25rem;
        }

        .tab-name {
            font-size: 0.7rem;
            font-weight: 600;
            color: #1e293b;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        .tab-color-indicator {
            width: 20px;
            height: 3px;
            border-radius: 2px;
            margin-top: 0.2rem;
        }

        .words-layout {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 1rem;
            max-width: 1200px;
            margin: 0 auto;
            align-items: start;
        }

        .words-display-area {
            background: white;
            border-radius: 1rem;
            padding: 1.5rem;
            box-shadow: 0 4px 20px rgba(0,0,0,0.08);
            max-height: calc(100vh - 350px);
            overflow-y: auto;
        }

        .words-category-header {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: 1rem;
            padding-bottom: 0.75rem;
            border-bottom: 2px solid #f1f5f9;
        }

        .words-category-emoji {
            font-size: 1.75rem;
        }

        .words-category-info h3 {
            font-size: 1.1rem;
            font-weight: 600;
            color: #1e293b;
            margin: 0;
        }

        .words-category-info p {
            font-size: 0.8rem;
            color: #64748b;
            margin: 0.15rem 0 0 0;
        }

        .words-cloud {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            justify-content: center;
        }

        .word-bubble {
            padding: 0.5rem 1rem;
            border-radius: 9999px;
            font-size: 0.875rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s ease;
            border: 2px solid transparent;
            background: #f8fafc;
            color: #1e293b;
        }

        .word-bubble:hover {
            transform: scale(1.05);
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }

        .word-bubble.selected {
            background: #1e293b;
            color: white;
            border-color: #1e293b;
            transform: scale(1.08);
            box-shadow: 0 6px 20px rgba(0,0,0,0.2);
        }

        .selected-words-panel {
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
            max-height: calc(100vh - 350px);
        }

        .selected-words-display {
            background: white;
            border-radius: 1rem;
            padding: 1rem;
            box-shadow: 0 4px 20px rgba(0,0,0,0.08);
            flex: 1;
            overflow-y: auto;
            min-height: 0;
        }

        .selected-words-display h4 {
            font-size: 0.875rem;
            color: #1e293b;
            margin-bottom: 0.75rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        #selectedWordsList {
            display: flex;
            flex-wrap: wrap;
            gap: 0.4rem;
        }

        .selected-word-tag {
            display: inline-flex;
            align-items: center;
            gap: 0.25rem;
            padding: 0.3rem 0.6rem;
            border-radius: 9999px;
            font-size: 0.8rem;
            font-weight: 500;
            color: white;
            cursor: pointer;
            transition: all 0.2s;
        }

        .stats-bar {
            display: flex;
            justify-content: space-around;
            background: white;
            border-radius: 1rem;
            padding: 0.75rem;
            box-shadow: 0 4px 20px rgba(0,0,0,0.08);
        }

        .stat-item {
            text-align: center;
        }

        .stat-value {
            font-size: 1.25rem;
            font-weight: 700;
            color: #1e293b;
        }

        .stat-label {
            font-size: 0.7rem;
            color: #64748b;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            margin-top: 0.1rem;
        }

        .clear-all-btn {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            padding: 0.75rem;
            border: none;
            border-radius: 1rem;
            background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);
            color: white;
            font-size: 0.875rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
            box-shadow: 0 4px 15px rgba(220, 38, 38, 0.3);
        }

        .clear-all-btn:hover {
            transform: translateY(-1px);
            box-shadow: 0 6px 20px rgba(220, 38, 38, 0.4);
        }

        @media (max-width: 768px) {
            .words-layout {
                grid-template-columns: 1fr;
                gap: 0.75rem;
            }
            
            .selected-words-panel {
                order: -1;
                max-height: none;
            }
            
            .words-display-area {
                max-height: none;
                padding: 1rem;
            }
            
            .selected-words-display {
                max-height: 150px;
            }
            
            .nav-links {
                display: none;
                position: absolute;
                top: 100%;
                left: 0;
                right: 0;
                background: white;
                flex-direction: column;
                padding: 1rem;
                border-bottom: 1px solid #e2e8f0;
            }
            
            .nav-links.show {
                display: flex;
            }
            
            .mobile-menu-btn {
                display: block;
            }
        }
    </style>
</head>
<body>
    <nav class="nav-bar">
        <div class="nav-brand" onclick="window.location.href='index-ru.html'">üßò –¢–µ—Ä–∞–ø–∏—è –û—Å–æ–∑–Ω–∞–Ω–Ω–æ—Å—Ç–∏</div>
        <button class="mobile-menu-btn" onclick="toggleMobileMenu()">
            <i class="fas fa-bars"></i>
        </button>
        <div class="nav-links" id="navLinks">
            <button class="nav-btn" onclick="window.location.href='emotion-explorer.html'">English</button>
            <button class="nav-btn" onclick="window.location.href='emotion-explorer-zh.html'">‰∏≠Êñá</button>
            <button class="nav-btn" onclick="window.location.href='index-ru.html'">–ì–ª–∞–≤–Ω–∞—è</button>
        </div>
    </nav>

    <div class="explorer-container">
        <header class="explorer-header">
            <h1>üé® –ò—Å—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å –≠–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–π –õ–µ–Ω—Ç—ã</h1>
            <p>–ù–∞–∂–º–∏—Ç–µ –Ω–∞ —Å–ª–æ–≤–∞, —á—Ç–æ–±—ã —Å–æ–∑–¥–∞—Ç—å —Å–≤–æ—é —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω—É—é –ª–µ–Ω—Ç—É. –£–∑–Ω–∞–π—Ç–µ, –∫–∞–∫ —Ä–∞–∑–Ω—ã–µ —ç–º–æ—Ü–∏–∏ —Å–æ—á–µ—Ç–∞—é—Ç—Å—è.</p>
        </header>

        <section class="ribbon-display-section">
            <div id="emotionRibbonDisplay">
                <div id="rainbowSvgContainer" style="width: 100%; height: 100%; position: absolute; top: 0; left: 0;">
                    <svg id="emotionRainbowSvg" viewBox="0 0 1200 120" style="width: 100%; height: 100%;">
                        <path id="rainbow-pair-1" d="M 0,120 A 600,35 0 0 1 1200,120 L 1200,95 A 600,35 0 0 0 0,95 Z" fill="transparent" stroke="none"></path>
                        <path id="rainbow-pair-2" d="M 0,100 A 600,25 0 0 1 1200,100 L 1200,75 A 600,25 0 0 0 0,75 Z" fill="transparent" stroke="none"></path>
                        <path id="rainbow-pair-3" d="M 0,80 A 600,15 0 0 1 1200,80 L 1200,55 A 600,15 0 0 0 0,55 Z" fill="transparent" stroke="none"></path>
                    </svg>
                </div>
            </div>
        </section>

        <section class="categories-tabs-section">
            <div class="tabs-container">
                <button class="category-tab active" data-category="POWER" onclick="switchTab('POWER')">
                    <span class="tab-emoji">üí™</span>
                    <span class="tab-name">–°–∏–ª–∞</span>
                    <span class="tab-color-indicator" style="background: #FF0000;"></span>
                </button>
                <button class="category-tab" data-category="POSSESSION" onclick="switchTab('POSSESSION')">
                    <span class="tab-emoji">üè†</span>
                    <span class="tab-name">–í–ª–∞–¥–µ–Ω–∏–µ</span>
                    <span class="tab-color-indicator" style="background: #00FF00;"></span>
                </button>
                <button class="category-tab" data-category="LOSS" onclick="switchTab('LOSS')">
                    <span class="tab-emoji">üíî</span>
                    <span class="tab-name">–ü–æ—Ç–µ—Ä—è</span>
                    <span class="tab-color-indicator" style="background: #FF00FF;"></span>
                </button>
                <button class="category-tab" data-category="EMPTINESS" onclick="switchTab('EMPTINESS')">
                    <span class="tab-emoji">‚≠ï</span>
                    <span class="tab-name">–ü—É—Å—Ç–æ—Ç–∞</span>
                    <span class="tab-color-indicator" style="background: #FFFF00;"></span>
                </button>
                <button class="category-tab" data-category="CRAVE" onclick="switchTab('CRAVE')">
                    <span class="tab-emoji">üî•</span>
                    <span class="tab-name">–ñ–µ–ª–∞–Ω–∏–µ</span>
                    <span class="tab-color-indicator" style="background: #0000FF;"></span>
                </button>
                <button class="category-tab" data-category="EMPATHY" onclick="switchTab('EMPATHY')">
                    <span class="tab-emoji">ü§ù</span>
                    <span class="tab-name">–≠–º–ø–∞—Ç–∏—è</span>
                    <span class="tab-color-indicator" style="background: #00FFFF;"></span>
                </button>
            </div>
            
            <div class="words-layout">
                <div class="words-display-area" id="wordsDisplayArea">
                    <!-- –°–ª–æ–≤–∞ –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã JavaScript -->
                </div>
                
                <div class="selected-words-panel">
                    <div class="selected-words-display">
                        <h4><i class="fas fa-check-circle"></i> –í—ã–±—Ä–∞–Ω–Ω—ã–µ –°–ª–æ–≤–∞</h4>
                        <div id="selectedWordsList">
                            <span style="color: #94a3b8; font-size: 0.875rem;">–ü–æ–∫–∞ –Ω–µ—Ç –≤—ã–±—Ä–∞–Ω–Ω—ã—Ö —Å–ª–æ–≤...</span>
                        </div>
                    </div>
                    
                    <div class="stats-bar">
                        <div class="stat-item">
                            <div class="stat-value" id="totalSelected">0</div>
                            <div class="stat-label">–°–ª–æ–≤–∞</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value" id="categoriesActive">0</div>
                            <div class="stat-label">–ö–∞—Ç–µ–≥–æ—Ä–∏–∏</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value" id="dominantCategory">-</div>
                            <div class="stat-label">–î–æ–º–∏–Ω–∏—Ä—É–µ—Ç</div>
                        </div>
                    </div>
                    
                    <button class="clear-all-btn" onclick="clearAllWords()">
                        <i class="fas fa-trash-alt"></i> –û—á–∏—Å—Ç–∏—Ç—å –í—Å–µ
                    </button>
                </div>
            </div>
        </section>
    </div>

    <script>
        // Russian Emotion Lexicon
        const EmotionRibbon = {
            lexicon: {
                POWER: ['—Å–∏–ª—å–Ω—ã–π','–º–æ—â–Ω—ã–π','—Å–∏–ª–∞','–¥–æ–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ','–≤–ª–∞—Å—Ç—å','–∫–æ–Ω—Ç—Ä–æ–ª—å','–º–∞—Å—Ç–µ—Ä','–ª–∏–¥–µ—Ä','—É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å','—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å','—Ç—Ä–∏—É–º—Ñ','–ø–æ–±–µ–¥–∞','—É—Å–ø–µ—Ö','–º—É–∂–µ—Å—Ç–≤–æ','—Ö—Ä–∞–±—Ä–æ—Å—Ç—å','—ç–Ω–µ—Ä–≥–∏—è','–±–æ–¥—Ä–æ—Å—Ç—å','–¥–æ—Å—Ç–∏–∂–µ–Ω–∏–µ','–∞–º–±–∏—Ü–∏–∏','–≤–µ–ª–∏—á–∏–µ','–≥–µ—Ä–æ–π','—á–µ–º–ø–∏–æ–Ω','–ø—Ä–µ–≤–æ—Å—Ö–æ–¥—Å—Ç–≤–æ','–ø—Ä–µ–≤–æ—Å—Ö–æ–¥–Ω—ã–π','—Å–º–µ–ª—ã–π','—Ä–µ—à–∏—Ç–µ–ª—å–Ω—ã–π','–≤–ª–∏—è–Ω–∏–µ','–º–∞—Å—Ç–µ—Ä—Å—Ç–≤–æ','—Å–∏–ª—å–Ω—ã–π','—ç–Ω—Ç—É–∑–∏–∞–∑–º','—Å—á–∞—Å—Ç—å–µ','–æ–ø—Ç–∏–º–∏–∑–º','–≤–ø–µ—Ä–µ–¥','–≤–æ–∑–º–æ–∂–Ω–æ'],
                POSSESSION: ['–≤–ª–∞–¥–µ–Ω–∏–µ','–∏–º–µ—Ç—å','–ø—Ä–∏–æ–±—Ä–µ—Ç–∞—Ç—å','–ø–æ–ª—É—á–∞—Ç—å','–∂–µ–ª–∞–Ω–∏–µ','—Ö–æ—Ç–µ—Ç—å','–∂–∞–¥–Ω–æ—Å—Ç—å','–±–æ–≥–∞—Ç—Å—Ç–≤–æ','—Å–æ–∫—Ä–æ–≤–∏—â–µ','–¥–µ—Ä–∂–∞—Ç—å','—Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å','–ø—Ä–∏–Ω–∞–¥–ª–µ–∂–Ω–æ—Å—Ç–∏','–∞–∫—Ç–∏–≤—ã','–∫–æ–ª–ª–µ–∫—Ü–∏—è','–Ω–∞–∫–∞–ø–ª–∏–≤–∞—Ç—å','—É–¥–æ–≤–ª–µ—Ç–≤–æ—Ä–µ–Ω–Ω—ã–π','–ø–æ–ª–Ω—ã–π','–∑–∞–Ω—è—Ç—ã–π','–∑–∞–≤–µ—Ä—à–µ–Ω–Ω—ã–π','–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ'],
                LOSS: ['–ø–æ—Ç–µ—Ä—è','—Ç–µ—Ä—è—Ç—å','–≥–æ—Ä–µ','—Å–∫–æ—Ä–±—å','–ø–µ—á–∞–ª—å','—Å—Ç—Ä–∞–¥–∞–Ω–∏–µ','–±–æ–ª—å','—Ä–∞–∑–ª—É–∫–∞','–æ—Ç–∫–∞–∑','–ª–∏—à–µ–Ω–Ω—ã–π','—É—Ç—Ä–∞—Ç–∞','—Å–º–µ—Ä—Ç—å','—Ä–∞–∑–≤–æ–¥','–∫–∞—Ç–∞—Å—Ç—Ä–æ—Ñ–∞','–æ—Ç—á–∞—è–Ω–∏–µ','–ø–ª–∞–∫–∞—Ç—å','—Ä–∞–∑–±–∏—Ç–æ–µ —Å–µ—Ä–¥—Ü–µ','—Ç—Ä–∞—É—Ä','–ø–æ–∫–∏–Ω—É—Ç—ã–π','–≥—Ä—É—Å—Ç–Ω—ã–π','–ø–æ–¥–∞–≤–ª–µ–Ω–Ω—ã–π','–º–µ–ª–∞–Ω—Ö–æ–ª–∏—è','—Ä–∞–∑–æ—á–∞—Ä–æ–≤–∞–Ω–Ω—ã–π','–±–µ—Å–ø–æ–º–æ—â–Ω—ã–π'],
                EMPTINESS: ['–ø—É—Å—Ç–æ–π','–ø—É—Å—Ç–æ—Ç–∞','–ø–æ–ª—ã–π','–æ–Ω–µ–º–µ–≤—à–∏–π','–º–µ—Ä—Ç–≤—ã–π','–±–µ—Å—Å–º—ã—Å–ª–µ–Ω–Ω—ã–π','–±–µ—Å—Ü–µ–ª—å–Ω—ã–π','–∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–π','–æ–¥–∏–Ω–æ–∫–∏–π','–æ—Ç—á–∞—è–Ω–∏–µ','–æ—Ç–∫–ª—é—á–µ–Ω–Ω—ã–π','–æ–ø—É—Å—Ç–æ—à–µ–Ω–Ω—ã–π','–∏—Å—Ç–æ—â–µ–Ω–Ω—ã–π','–ø—É—Å—Ç—ã–Ω–Ω—ã–π','–ø–æ–∫–∏–Ω—É—Ç—ã–π','–±–µ—Å–ø–æ–ª–µ–∑–Ω—ã–π','–æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ','–¥–µ–ø—Ä–µ—Å—Å–∏—è','–±–µ—Å–ø–æ–∫–æ–π—Å—Ç–≤–æ','—Ç—Ä–µ–≤–æ–≥–∞'],
                CRAVE: ['–∂–∞–∂–¥–∞—Ç—å','—Ç–æ—Å–∫–∞','–∂–µ–ª–∞–Ω–∏–µ','–≥–æ–ª–æ–¥','–∂–∞–∂–¥–∞','–Ω–∞—Å—Ç–æ—è—Ç–µ–ª—å–Ω–∞—è –ø–æ—Ç—Ä–µ–±–Ω–æ—Å—Ç—å','—Å—Ç—Ä–∞—Å—Ç—å','–æ—Ç—á–∞—è–Ω–Ω—ã–π','—Å—Ä–æ—á–Ω—ã–π','–ø—ã–ª–∞—é—â–∏–π','–∑–∞–≤–∏—Å–∏–º—ã–π','–Ω–µ—Ç–µ—Ä–ø–µ–ª–∏–≤—ã–π','–±–æ–ª—å–Ω–æ–π','–Ω–µ–Ω–∞—Å—ã—Ç–Ω—ã–π','–ø–æ–º–µ—à–∞–Ω–Ω—ã–π','—Ç—Ä–µ–≤–æ–∂–Ω—ã–π','–∫–æ–º–ø—É–ª—å—Å–∏—è','–ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ'],
                EMPATHY: ['—ç–º–ø–∞—Ç–∏—è','—Å–æ—Å—Ç—Ä–∞–¥–∞–Ω–∏–µ','—Å–æ—á—É–≤—Å—Ç–≤–∏–µ','–ø–æ–Ω–∏–º–∞–Ω–∏–µ','–∑–∞–±–æ—Ç–∞','–¥–æ–±—Ä–æ—Ç–∞','–Ω–µ–∂–Ω–æ—Å—Ç—å','–ª—é–±–æ–≤—å','—Å–≤—è–∑—å','–ø–æ–¥–¥–µ—Ä–∂–∫–∞','–∫–æ–º—Ñ–æ—Ä—Ç','–∑–∞–±–æ—Ç–∞','–¥–µ–ª–∏—Ç—å—Å—è','—Å–ª—É—à–∞—Ç—å','–∑–∞–±–æ—Ç–∞','—Ç–µ–ø–ª–æ—Ç–∞','–º–∏–ª–æ—Å–µ—Ä–¥–∏–µ','–¥–æ–±—Ä–æ—Ç–∞','–∏—Å—Ü–µ–ª–µ–Ω–∏–µ','–±–ª–∏–∑–æ—Å—Ç—å','–¥–æ–≤–µ—Ä–∏–µ','—á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å']
            }
        };
        window.EmotionRibbon = EmotionRibbon;

        // State
        let selectedWords = [];
        let currentTab = 'POWER';

        const categories = {
            POWER: { name: '–°–∏–ª–∞', emoji: 'üí™', color: '#8B0000' },
            POSSESSION: { name: '–í–ª–∞–¥–µ–Ω–∏–µ', emoji: 'üè†', color: '#FF6B35' },
            LOSS: { name: '–ü–æ—Ç–µ—Ä—è', emoji: 'üíî', color: '#191970' },
            EMPTINESS: { name: '–ü—É—Å—Ç–æ—Ç–∞', emoji: '‚≠ï', color: '#36454F' },
            CRAVE: { name: '–ñ–µ–ª–∞–Ω–∏–µ', emoji: 'üî•', color: '#DC143C' },
            EMPATHY: { name: '–≠–º–ø–∞—Ç–∏—è', emoji: 'ü§ù', color: '#2E8B57' }
        };

        const rainbowColors = {
            POWER: '#FF0000',
            EMPATHY: '#00FFFF',
            POSSESSION: '#00FF00',
            LOSS: '#FF00FF',
            CRAVE: '#0000FF',
            EMPTINESS: '#FFFF00'
        };

        function init() {
            setTimeout(() => {
                switchTab('POWER');
                updateUI();
            }, 100);
        }

        function switchTab(category) {
            currentTab = category;
            document.querySelectorAll('.category-tab').forEach(tab => {
                tab.classList.remove('active');
                if (tab.dataset.category === category) {
                    tab.classList.add('active');
                }
            });
            displayWordsForCategory(category);
        }

        function displayWordsForCategory(categoryKey) {
            const displayArea = document.getElementById('wordsDisplayArea');
            const category = categories[categoryKey];
            const words = window.EmotionRibbon.lexicon[categoryKey] || [];
            
            displayArea.innerHTML = `
                <div class="words-category-header">
                    <div class="words-category-emoji">${category.emoji}</div>
                    <div class="words-category-info">
                        <h3>${category.name}</h3>
                        <p>${words.length} —Å–ª–æ–≤ ‚Ä¢ –ù–∞–∂–º–∏—Ç–µ —á—Ç–æ–±—ã –≤—ã–±—Ä–∞—Ç—å</p>
                    </div>
                </div>
                <div class="words-cloud">
                    ${words.map(word => {
                        const isSelected = selectedWords.some(w => w.word === word && w.category === categoryKey);
                        return `
                            <button class="word-bubble ${isSelected ? 'selected' : ''}" 
                                    onclick="toggleWord('${word}', '${categoryKey}')"
                                    data-word="${word}" 
                                    data-category="${categoryKey}">
                                ${word}
                            </button>
                        `;
                    }).join('')}
                </div>
            `;
        }

        function toggleWord(word, category) {
            const existingIndex = selectedWords.findIndex(w => w.word === word && w.category === category);
            if (existingIndex >= 0) {
                selectedWords.splice(existingIndex, 1);
            } else {
                selectedWords.push({ word, category });
            }
            updateUI();
        }

        function updateUI() {
            displayWordsForCategory(currentTab);
            updateSelectedWordsList();
            updateRibbon();
            updateStats();
        }

        function updateSelectedWordsList() {
            const list = document.getElementById('selectedWordsList');
            if (selectedWords.length === 0) {
                list.innerHTML = '<span style="color: #94a3b8; font-size: 0.875rem;">–ü–æ–∫–∞ –Ω–µ—Ç –≤—ã–±—Ä–∞–Ω–Ω—ã—Ö —Å–ª–æ–≤...</span>';
                return;
            }
            list.innerHTML = selectedWords.map(w => {
                const color = rainbowColors[w.category];
                return `<span class="selected-word-tag" style="background: ${color};" onclick="toggleWord('${w.word}', '${w.category}')">
                    ${w.word} <span class="remove">√ó</span>
                </span>`;
            }).join('');
        }

        function updateStats() {
            document.getElementById('totalSelected').textContent = selectedWords.length;
            const uniqueCategories = new Set(selectedWords.map(w => w.category));
            document.getElementById('categoriesActive').textContent = uniqueCategories.size;
            
            if (selectedWords.length === 0) {
                document.getElementById('dominantCategory').textContent = '-';
            } else {
                const counts = {};
                selectedWords.forEach(w => { counts[w.category] = (counts[w.category] || 0) + 1; });
                const dominant = Object.entries(counts).sort((a, b) => b[1] - a[1])[0];
                document.getElementById('dominantCategory').textContent = categories[dominant[0]].name;
            }
        }

        function updateRibbon() {
            const activeCategories = new Set(selectedWords.map(w => w.category));
            const categoryCounts = {};
            selectedWords.forEach(w => { categoryCounts[w.category] = (categoryCounts[w.category] || 0) + 1; });

            const bandPairs = [
                { band: 'pair-1', cat1: 'POWER', cat2: 'EMPATHY' },
                { band: 'pair-2', cat1: 'POSSESSION', cat2: 'LOSS' },
                { band: 'pair-3', cat1: 'CRAVE', cat2: 'EMPTINESS' }
            ];

            bandPairs.forEach(pair => {
                const band = document.getElementById(`rainbow-${pair.band}`);
                if (!band) return;

                const cat1Active = activeCategories.has(pair.cat1);
                const cat2Active = activeCategories.has(pair.cat2);
                const count1 = categoryCounts[pair.cat1] || 0;
                const count2 = categoryCounts[pair.cat2] || 0;

                if (!cat1Active && !cat2Active) {
                    band.setAttribute('fill', 'transparent');
                } else if (cat1Active && !cat2Active) {
                    const intensity = Math.min(count1 / 3, 1);
                    const color = rainbowColors[pair.cat1];
                    const r = Math.floor(parseInt(color.substring(1, 3), 16) * intensity);
                    const g = Math.floor(parseInt(color.substring(3, 5), 16) * intensity);
                    const b = Math.floor(parseInt(color.substring(5, 7), 16) * intensity);
                    band.setAttribute('fill', `#${r.toString(16).padStart(2, '0')}${g.toString(16).padStart(2, '0')}${b.toString(16).padStart(2, '0')}`);
                } else if (!cat1Active && cat2Active) {
                    const intensity = Math.min(count2 / 3, 1);
                    const color = rainbowColors[pair.cat2];
                    const r = Math.floor(parseInt(color.substring(1, 3), 16) * intensity);
                    const g = Math.floor(parseInt(color.substring(3, 5), 16) * intensity);
                    const b = Math.floor(parseInt(color.substring(5, 7), 16) * intensity);
                    band.setAttribute('fill', `#${r.toString(16).padStart(2, '0')}${g.toString(16).padStart(2, '0')}${b.toString(16).padStart(2, '0')}`);
                } else {
                    band.setAttribute('fill', '#FFFFFF');
                }
            });
        }

        function clearAllWords() {
            selectedWords = [];
            updateUI();
        }

        function toggleMobileMenu() {
            document.getElementById('navLinks').classList.toggle('show');
        }

        document.addEventListener('DOMContentLoaded', init);
    </script>
</body>
</html>
